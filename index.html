<!-- Your revised HTML with improvements -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Backlinks Indexer tool</title>
  <style>
   body {
  font-family: Arial, sans-serif;
  background: linear-gradient(to right, #2980B9, #6DD5FA);
  color: #252525;
  margin: 0;
  padding: 0;
}


.container {
        padding: 20px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.8);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-top: 5%;
        margin-right: 3%;
        margin-left: 3%;
    }


.form-container {
  margin-bottom: 20px;
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 4px;
}

#urlInput {
  width: 100%;
  height: 40px;
  padding: 8px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
  box-sizing: border-box;
  margin-bottom: 0.5%;
}

#urlInput:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

#submitForm button {
  width: 100%;
  padding: 8px 12px;
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
}

#submitForm button:focus {
  outline: none;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

#submittedURLs {
  list-style-type: none;
  margin: 0;
  padding: 0;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.submittedURL {
  padding: 12px;
  border-bottom: 1px solid #ddd;
  font-size: 16px;
}

.submittedURL:last-child {
  border-bottom: none;
}

.submittedURL a {
  color: #007bff;
  text-decoration: none;
  font-size: 16px;
}

.submittedURL a:hover {
  text-decoration: underline;
}


  </style>
</head>
<body>
<div class="container">
    <h1>Submitted URLs</h1>

    <form id="submitForm">
      <label for="urlInput">Enter URL:</label>
      <input type="url" id="urlInput" name="urlInput" required>
      <button type="submit">Submit</button>
    </form>
    <div id="popup" class="popup">
      <div class="popup-content">
        
      </div>
    </div>
    <ul id="submittedURLs">
      <!-- Submitted URLs will be dynamically added here -->
    </ul>
</div>
<script>
  // server.js

const express = require('express');
const mongoose = require('mongoose');
const cors = require('cors');

const app = express();
app.use(express.json());
app.use(cors());

// Connect to MongoDB
mongoose.connect('mongodb://localhost:27017/url_database', {
  useNewUrlParser: true,
  useUnifiedTopology: true
});

// Create a URL Schema
const urlSchema = new mongoose.Schema({
  url: String
});

const URL = mongoose.model('URL', urlSchema);

// Route to save a URL
app.post('/save-url', async (req, res) => {
  const { url } = req.body;
  const newURL = new URL({ url });
  await newURL.save();
  res.status(200).json({ message: 'URL saved successfully' });
});

// Route to fetch all URLs
app.get('/urls', async (req, res) => {
  const urls = await URL.find();
  res.status(200).json(urls);
});

app.listen(3000, () => {
  console.log('Server is running on port 3000');
});

  document.getElementById('submitForm').addEventListener('submit', function(event) {
    event.preventDefault();
    const url = document.getElementById('urlInput').value.trim(); // Trim whitespace
    if (isValidURL(url)) {
      addSubmittedURL(url);
      document.getElementById('urlInput').value = ''; // Clear input field after submission
    } else {
      alert('Please enter a valid URL.');
    }
  });

  document.addEventListener('DOMContentLoaded', function() {
    // Load submitted URLs from localStorage when the page loads
    const savedURLs = JSON.parse(localStorage.getItem('submittedURLs')) || [];
    savedURLs.forEach(url => {
      addSubmittedURL(url);
    });
  });

  function isValidURL(url) {
    // Simple URL validation
    return /^(ftp|http|https):\/\/[^ "]+$/.test(url);
  }

  function addSubmittedURL(url) {
    // Check if the URL already exists in the list
    const existingURLs = document.querySelectorAll('#submittedURLs a');
    for (let i = 0; i < existingURLs.length; i++) {
      if (existingURLs[i].getAttribute('href') === url) {
        showPopup();
        return; // Ignore duplicate URL
      }
    }

    // Add the URL to the list
    const submittedURLs = document.getElementById('submittedURLs');
    const listItem = document.createElement('li');
    listItem.classList.add('submittedURL');
    listItem.innerHTML = `
      <a href="${url}" target="_blank">${url}</a>
      <button class="remove-btn" onclick="removeSubmittedURL(this)">Remove</button>
    `;
    submittedURLs.appendChild(listItem);

    // Save the submitted URL to localStorage
    saveURLToLocalStorage(url);
  }

  function showPopup() {
    const popup = document.getElementById('popup');
    popup.classList.add('show');
    setTimeout(function() {
      popup.classList.remove('show');
    }, 2000); // Close popup after 2 seconds
  }

  function saveURLToLocalStorage(url) {
    const savedURLs = JSON.parse(localStorage.getItem('submittedURLs')) || [];
    savedURLs.push(url);
    localStorage.setItem('submittedURLs', JSON.stringify(savedURLs));
  }

  function removeSubmittedURL(button) {
    const listItem = button.parentElement;
    const url = listItem.querySelector('a').getAttribute('href');
    listItem.remove();
    removeURLFromLocalStorage(url);
  }

  function removeURLFromLocalStorage(url) {
    const savedURLs = JSON.parse(localStorage.getItem('submittedURLs')) || [];
    const updatedURLs = savedURLs.filter(savedURL => savedURL !== url);
    localStorage.setItem('submittedURLs', JSON.stringify(updatedURLs));
  }
</script>

</body>
</html>
